<app-subscreen-nav>
	<subscreen-bar
		css="ui-secondary shadow-bar title-bar-fixed"
		title="{ title }"
		mdicon="mdi mdi-arrow-left">
	</subscreen-bar>
	<div class="title-bar-spacer"></div>
	<div id="subscreenNavMount" class="container-flex-1280 ui-white shadow"></div>
	<style>
		.title-bar-fixed { position:fixed;width:100%; }
		.title-bar-spacer { height:3.5em; }
		.container-flex-1280 {
			flex:1;
			margin-left:0;
			margin-right:0;
			min-height:auto;
			overflow-y:auto;
		}
		@media only screen and (min-width:992px) {
			.container-flex-1280 {
				flex:1;
				max-width:1280px;
				margin-left:auto;
				margin-right:auto;
			}
		}
	</style>
	<script>
		var self = this;
		isFixed = true;
		// ----------------------------------------
		// ON UI STATE CHANGE
		// ----------------------------------------
		RiotControl.on('UI_STATE_CHANGED',function(state) {
			title = state.title;
			self.update();
		});
		// ----------------------------------------
		// ON MOUNT
		// ----------------------------------------
		this.on('mount',function() {
			RiotControl.trigger('UI_SET_STATE',{ title:"Initializing..." });
			/*
			// TODO: DEBUG THIS !!!!!!
			// --------------------------------------
			// WINDOW RESIZE
			// --------------------------------------
			// Handles soft keyboard openning
			// --------------------------------------
			var lastHeight = window.innerHeight;

			window.onresize = function() {
				var currentHeight = window.innerHeight;

				if(currentHeight < lastHeight) {
					//var DIFF = lastHeight - currentHeight;
					if(isFixed == false) {
						isFixed = true;
						lastHeight = currentHeight;
						self.update();
					}
				} else if(currentHeight > lastHeight) {
					//var DIFF = currentHeight - lastHeight;
					if(isFixed == true) {
						isFixed = false;
						lastHeight = currentHeight;
						self.update();
					}
				}
				console.log("LAST HEIGHT: " + lastHeight + " VS CURRENT HEIGHT: " + currentHeight);
				console.log("IS VISIBLE: " + isFixed);
			}
		*/
		});
	</script>
</app-subscreen-nav>
