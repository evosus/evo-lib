<app>
	<nav-menu css="ui-background" items="{ navMenuItems }" />
	<nav-bar css="ui-primary"></nav-bar>
	<title-bar css="ui-secondary" title="Frontend Library" ></title-bar>
	<div style="height:calc(100vh - 7em);overflow:auto;">
		<div class="pad-1">
			<div style="overflow:hidden;">
				<ui-input name="name" label="Name" placeholder="Name" onkeyup="{ syncInput }" />
			</div>
			<div style="overflow:hidden;">
				<ui-input name="phone" label="Phone" placeholder="Phone" onkeyup="{ syncInput }" />
			</div>
			<div style="overflow:hidden;">
				<ui-input name="address.street" label="Street" placeholder="Street" onkeyup="{ syncInput }" />
			</div>
			<div style="overflow:hidden;">
				<ui-input name="address.city" label="City" placeholder="City" onkeyup="{ syncInput }" />
			</div>
			<div style="overflow:hidden;">
				<ui-input name="address.state" label="State" placeholder="State" onkeyup="{ syncInput }" />
			</div>
			<div style="overflow:hidden;">
				<ui-input name="address.zip" label="Zip" placeholder="Zip" onkeyup="{ syncInput }" />
			</div>
		</div>
		<div class="pad-1">
			<div>
				<h1>{ newItem.name }</h1>
				<h5>{ newItem.email }</h5>
				<h5>{ newItem.phone }</h5>
				<div if="{ newItem.address }">
					<h6>{ newItem.address.street }</h6>
					<h6>{ newItem.address.city }</h6>
					<h6>{ newItem.address.state }</h6>
					<h6>{ newItem.address.zip }</h6>
				</div>
			</div>
		</div>
	</div>
	<script>
		var self = this;
		IO = riot.observable();
    /** SYNC input fields with new item object */ 
		self.newItem = {};
    self.syncInput = function(e) {
			if(e.target.value) {
				var newName = e.target.name; 
				var newValue = e.target.value; 
				// IF NESTED PATH NAME
				if(newName.indexOf(".") > 0) {
					var newArray = newName.split(".");
					// IF NESTED PATH > 2 FRAMENTS
					if(newArray.length > 2) {
						console.error("FIELD NAME PATH (" + newName + ") is > 2")
					} else {
						// IF FIRST PATH FRAGMENT EXISTS
						if(self.newItem.hasOwnProperty(newArray[0])) {
							// IF SECOND PATH FRAGMENT EXISTS
							if(self.newItem[newArray[0]].hasOwnProperty(newArray[1])) {
								// APPEND VALUE
								self.newItem[newArray[0]][newArray[1]] = newValue;
							// ADD SECOND PATH FRAGMENT
							} else {
								self.newItem[newArray[0]][newArray[1]] = {};
								// APPEND VALUE
								self.newItem[newArray[0]][newArray[1]] = newValue;
							}
						// ADD FIRST PATH FRAGMENT
						} else {
							self.newItem[newArray[0]] = {};
							// APPEND VALUE
							self.newItem[newArray[0]][newArray[1]] = newValue;
						}
					}
				// UPDATE EXISTING FRAGMENT
				} else {
					self.newItem[newName] = newValue;
				}
				// LOG RESULTING OBJECT
				//console.log(JSON.stringify(self.newItem,null,2));
			}
    }
	</script>
</app>
