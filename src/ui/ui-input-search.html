<ui-input-search value="{ field.value }" style="width:100%;max-width:50em;">
	<div class="ui-input-search f-row ai-center">
		<i class="{ opts.mdicon }"></i>
		<input name="field"
			class="f-one"
			type="text"
			placeholder="{ opts.placeholder }"
			onblur="{ blur }"
			onfocus="{ focus }"
			onmouseover="{ hover }"
			onkeyup="{ keyup }"
		/>
		<i if="{ field.value.length > 1 }" onclick="{ reset }" class="mdi mdi-close-circle"></i>
	</div>
	<style scoped>
		input::-webkit-input-placeholder { color:rgba(255,255,255,0.75);font-style:italic; }
		input::-moz-placeholder { color:rgba(255,255,255,0.75);font-style:italic; }
		input:-ms-input-placeholder { color:rgba(255,255,255,0.75);font-style:italic; }
		input:-moz-placeholder { color:rgba(255,255,255,0.75);font-style:italic; }
		.ui-input-search {
			width:100%;
			background:rgba(255,255,255,0.15);
			border-radius:.15em;
		}
		.ui-input-search > i:first-child {
			padding-left:.5em;
			font-size:125%;
			line-height:125%;
		}
		.ui-input-search > i:last-child {
			cursor:pointer;
			padding-right:.5em;
			font-size:125%;
			line-height:125%;
		}
		.ui-input-search > input {
			width:100%;
			color:white;
			font-size:100%;
			background:none;
			border:none;
			padding:.5em;
		}
	</style>
	<script>
		var self = this;
		// --------------------------------------
		// MAP EVENTS TO OBSERVABLE (io)
		// --------------------------------------
		blur(e) { opts.io.trigger(opts.name + ':blur',e); }
		focus(e) { opts.io.trigger(opts.name + ':focus',e); }
		hover(e) { opts.io.trigger(opts.name + ':hover',e); }
		keyup(e) { opts.io.trigger(opts.name + ':keyup',e); }
		reset() { opts.io.trigger(opts.name + ':reset'); }
		// --------------------------------------
		// ON FOCUS
		// --------------------------------------
		opts.io.on(opts.name + ':focus',function(e) {
			self.field.focus();
			self.update();
		});
		// --------------------------------------
		// ON CHANGE
		// --------------------------------------
		opts.io.on(opts.name + ':change',function(newValue) {
			console.log("change triggered");
			self.field.value = newValue;
			self.update();
		});
		// --------------------------------------
		// ON KEYUP
		// --------------------------------------
		opts.io.on(opts.name + ':keyup',function(e) {
			self.update();
		});
		// --------------------------------------
		// RESET
		// --------------------------------------
		opts.io.on(opts.name + ':reset',function() {
			self.field.value = '';
			self.field.focus();
			self.update();
		});
	</script>
</ui-input-search>
