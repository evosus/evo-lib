<view-detail>
	<ui-modal ref="ui_modal" />
	<nav-menu ref="nav_menu" />
	<nav-bar ref="nav_bar" />
	<nav-bar-detail ref="nav_bar_detail" />
	<div class="scroll-1">
		<div class="pad-1-2">
			<div each="{ num in new Array(45) }">
				<h1>num</h1>
			</div>
		</div>
	</div>
	<script>
		// MIXIN
		this.mixin(IO);
		// SELF
		var self = this;
		// MOUNT
		this.on('mount',function() {
			// OPTS
			opts = this.opts;
			// TITLE
			opts.title = 'View Detail';
			// NAV MENU
			opts.nav_menu = {
				companyName:'Devosus, Inc',
				css:'ui-white fg-teal',
				cssActive:'ui-teal',
				cssHead:'ui-teal',
				isOpen: false,
				items:navMenuItems,
				userName:'Corey Holten'
			};
			// NAV BAR
			opts.nav_bar = { css:'ui-primary' };
			// NAV BAR DETAIL
			opts.nav_bar_detail = {
				title:'View Detail',
				css:'ui-primary',
				mdicon:'mdi mdi-arrow-left'
			};
			// UI MODAL
			opts.ui_modal = { isOpen: false, template:null };
			// INIT STATE
			RC.trigger('UI_INIT_STATE',{ [opts.title]:opts });
		});
		// HANDLE COMPONENT EVENTS
		navBarMenuClick = function() { toggleNavMenu(); };
		navMenuClose = function() { toggleNavMenu() };
		navMenuClick = function(e) {
			if(e) { route(e.item.route); }
		}
		//navBarSearchClick = function() { };
		//navBarHistoryClick = function() { };
		//navBarMessageClick = function() { };
		//closeModal: function() { };

		// TOGGLE NAV MENU
		toggleNavMenu = function() {
			opts.nav_menu.isOpen ? opts.nav_menu.isOpen = false : opts.nav_menu.isOpen = true;
			RC.trigger('UI_SET_STATE',{ [opts.title]:opts });
		}
		// STATE CHANGE
		RC.on('UI_STATE_CHANGED',function(newState) {
			if(newState[opts.title]) {
				self.setOpts(newState[opts.title]);
			}
		});
		// UPDATE
		this.on('update',function() {
			Object.keys(self.refs).forEach(function(REF) {
				// UPDATE SELF REF
				if(self.refs[REF].hasOwnProperty('setOpts')) {
					self.refs[REF].setOpts(opts[REF]);
				}
				// IF CHILD REFS
				if(self.refs[REF].refs) {
					// LOOP CHILD REFS
					Object.keys(self.refs[REF].refs).forEach(function(CHILD_REF) {
						// UPDATE CHILD REF
						if(self.refs[REF].refs[CHILD_REF].hasOwnProperty('setOpts')) {
							self.refs[REF].refs[CHILD_REF].setOpts(opts[CHILD_REF]);
						}
					});
				}
			});
		});
		// UNMOUNT
		this.on('unmount',function() {
			RC.off('UI_STATE_CHANGED');
		});

	</script>
</view-detail>
